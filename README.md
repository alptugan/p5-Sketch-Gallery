# P5 Sketch Gallery

A web application for p5.js sketches built with vanilla JavaScript, custom web components, and Vite. Built for my Creative Coding class students to showcase their p5.js projects. Users can view sketches in a responsive layout, and an admin panel allows for easy management of the sketches using the links of their p5js editor or openProcessing. 


## Motivation
In my Creative Coding course, students create weekly p5.js sketches as assignments. Reviewing each assignment one by one is time consuming and lacks a cohesive presentation. I could use Github Pages or similar services, but they require manual setup and lack an easy way for students to contribute their work.This gallery serves as a centralized platform for students to showcase their work, explore peers' creations, and manage their submissions through an intuitive admin panel.

## Features
- Weekly categorized sketches (`/super-admin.html`)
- Responsive gallery layout displaying p5.js sketches
- User panel for adding, editing, and removing sketches (Basic Auth protected `/admin.html`)
- No extra setup. Just copy/paste the sketch link. Backend handles the rest.
- 


## How it works
- Copy the browser address of a p5.js sketch from the p5.js web editor or openProcessing sites.
- Go to the admin panel (http://localhost:3000/admin.html) and log in with the admin credentials (.env file).
- Use the "Add Sketch" form to paste your sketch link, provide a title and description, canvas size and submit.
- The sketch will be added to the gallery and can be viewed by all users.

## Tech Stack

- **Frontend**: Vanilla JavaScript with Web Components
- **Styling**: CSS with CSS custom properties (variables)
- **Build Tool**: Vite
- **Backend**: Express.js (Node.js)
- **Package Manager**: pnpm
- **Dev Server**: Nodemon for auto-restart

## Run locally

- Install dependencies:
    ```sh
    pnpm install
    ```

- Start the app (backend + static frontend):
    ```sh
    pnpm start
    ```
    - Opens an Express server on http://localhost:3000
    - The frontend is served as static files from [index.html](index.html)
    - Imports [`src/config.js`](src/config.js) generated by the backend

- Open the gallery:
    - http://localhost:3000/

## Admin panels
This section describes the admin panel for managing sketches. Students can use this panel to add, edit, or remove their sketches from the gallery.

- URL: http://localhost:3000/admin.html
- Features: add/remove/edit sketches; persists to [`data/sketches.json`](data/sketches.json); regenerates [`src/config.js`](src/config.js)
- Built with React (JSX) and Vite
- Development (with Vite HMR):
    ```sh
    pnpm dev
    ```
    - Express at http://localhost:3000
    - Vite (admin UI) at http://localhost:5173 (proxies /api to Express)
    - Visit admin during dev via Vite: http://localhost:5173/admin-dist/

- Production build:
    ```sh
    pnpm build
    ```
    - Outputs to [`admin-dist/`](admin-dist/)
    - Start server normally: `pnpm start`
    - Express serves `/admin-dist` and routes `/admin.html` to the built admin


## Deployment (Railway.app)

This project is configured for Railway deployment with automatic builds.

### Setup:

1. **Connect your GitHub repository** to Railway
2. **Set environment variables** (required):
   - `ADMIN_USER` - Username for admin authentication
   - `ADMIN_PASS` - Password for admin authentication
   - `SUPER_ADMIN_USER` - Username for super admin (folder management)
   - `SUPER_ADMIN_PASS` - Password for super admin (folder management)
   - `PORT` - Auto-set by Railway (default: 3000)
   - `NODE_ENV` - Set to `production` for production deployments

3. **Deploy settings**:
   - Builder: Dockerfile
   - Build Command: `pnpm install && pnpm build`
   - Start Command: `pnpm start`
   - The build process automatically:
     - Builds the admin UI (`admin-dist/`)
     - Generates `src/config.js` from `data/sketches.json`

### Important files for deployment:
- `railway.json` - Railway deployment configuration
- `Dockerfile` - Docker build configuration (uses Node.js 20 + pnpm)
- `.dockerignore` - Excludes unnecessary files from Docker build
- `.gitignore` - Excludes `admin-dist/` (generated during build)

### After deployment:
- Gallery: `https://your-app-name.up.railway.app/`
- Admin Panel: `https://your-app-name.up.railway.app/admin.html`
- Super Admin Panel: `https://your-app-name.up.railway.app/super-admin.html`


## Todo
- [ ] Implement user authentication panel for admin panel.
- [ ] Create a database integration for storing sketches.
- [ ] Add kiosk mode for public displays.
- [ ] Add slideshow mode for gallery viewing.
- [ ] Display description of sketches on frontend.
- [ ] Add navigation to switch between sketches.


## License
This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.